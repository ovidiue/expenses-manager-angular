<div class="container">
  <div class="page-title">
    <h3>Expenses</h3>
  </div>

  <div class="row">
    <p-toast position="top-right"></p-toast>

    <div class="table-wrapper mt-5 mb-5">
      <div class="col">
        <p-toolbar>
          <div class="ui-toolbar-group-right">
            <p-confirmDialog #cd
                             [style]="{width: '425px'}"
                             [acceptLabel]="'Delete'"
                             [acceptButtonStyleClass]="'ui-button-danger'"
                             [rejectButtonStyleClass]="'ui-button-secondary'"
                             [rtl]="true"
                             [header]="'Confirm DELETE'"
                             [rejectLabel]="'Cancel'">
              <p-footer>
                <button type="button" [class]="'ui-button-secondary float-left'" pButton
                        icon="pi pi-times"
                        label="Cancel" (click)="cd.reject()">
                </button>
                <button type="button" [class]="'ui-button-danger'" pButton icon="pi pi-check"
                        label="Delete" (click)="cd.accept()">
                </button>
              </p-footer>
            </p-confirmDialog>
            <button type="button"
                    (click)="confirmDeletion()"
                    pButton
                    [disabled]="!selectedExpenses.length"
                    class="ui-button-raised ui-button-danger"
                    label="Delete">
            </button>
            <button pButton type="button"
                    routerLink="add"
                    label="Add Expense"
                    class="ui-button-raised">
            </button>
          </div>
        </p-toolbar>

      </div>
      <div class="col">
        <p-table [value]="expenses"
                 [paginator]="true"
                 [rows]="10"
                 [(selection)]="selectedExpenses">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3em">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th>Id</th>
              <th>Title</th>
              <th>Amount</th>
              <th>Description</th>
              <th>Recurrent</th>
              <th>Created on</th>
              <th>Due date</th>
              <th>Category</th>
              <th>Tags</th>
              <th>Payed</th>
              <th>Actions</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-exp>
            <tr [pSelectableRow]="exp">
              <td>
                <p-tableCheckbox [value]="exp"></p-tableCheckbox>
              </td>
              <td>{{exp.id}}</td>
              <td>{{exp.title}}</td>
              <td>{{exp.amount}}</td>
              <td>{{exp.description}}</td>
              <td>{{exp.recurrent}}</td>
              <td>{{exp.createdOn | date}}</td>
              <td>{{exp.dueDate | date}}</td>
              <td>
                <span *ngIf="exp.category && exp.category.name"
                      class="bottom-bradius"
                      [ngStyle]="{'border-bottom': '8px solid' + exp.category.color}">
                  {{exp.category.name}}
                </span>
              </td>
              <td>
                <div *ngIf="exp.tags && exp.tags.length">
                  <div *ngFor="let tag of exp.tags"
                       class="bottom-bradius"
                       [ngStyle]="{'border-bottom': '8px solid' + tag.color}">
                    {{tag.name}}
                  </div>
                </div>
              </td>
              <td>{{exp.payed}}</td>

              <td class="text-center">
                <button pButton
                        class="ui-button-info"
                        type="button"
                        (click)="onEdit(exp)"
                        routerLink="add/{{exp.id}}"
                        icon="pi pi-pencil"
                        iconPos="left">
                </button>
                <button pButton
                        class="ui-button-danger"
                        type="button"
                        (click)="onDelete(exp)"
                        icon="pi pi-trash"
                        iconPos="left">
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>

    </div>
  </div>
</div>
